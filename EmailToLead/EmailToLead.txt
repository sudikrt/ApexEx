global class EmailToLead implements Messaging.InboundEmailHandler {
    global Messaging.InboundEmailResult handleInboundEmail (Messaging.InboundEmail email, Messaging.InboundEnvelope envelop ) {
		Messaging.InboundEmailResult res = new Messaging.InboundEmailResult ();
        
        Lead leadData = new Lead ();
        leadData.LastName = 'Email TO lead';
        leadData.Company = 'Email2Lead';
        leadData.Email  = email.fromAddress;
        leadData.TTSApp__StartDate__c = System.now();
        leadData.TTSApp__EndDate__c = System.now().addDays(10); 
        try {
            DataBase.insert (leadData);
        } catch (Exception e) {
            System.debug('Email2Lead exception :' + e);
        }
        return res;
    }
}